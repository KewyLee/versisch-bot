# Telegram Форма для страховых документов

## Описание проекта

Это приложение интегрируется с Telegram Mini App для обработки и отправки страховых форм. Приложение позволяет пользователям заполнять различные виды страховых форм (стандартная форма и форма доверенности BIG), сохранять введенные данные, добавлять подпись и отправлять заполненные формы через Telegram.

## Структура проекта

```
project-folder/
├── public/                      # Статические файлы для веб-интерфейса
│   ├── index.html               # Основная HTML-страница для стандартной формы
│   ├── vollmacht.html           # HTML-страница для формы доверенности BIG
│   ├── app.js                   # JavaScript для стандартной формы
│   ├── vollmacht.js             # JavaScript для формы доверенности BIG
│   ├── styles.css               # Стили для стандартной формы
│   └── vollmacht-styles.css     # Стили для формы доверенности BIG
├── uploads/                     # Директория для загруженных фотографий
├── filled_forms/                # Директория для сохранения заполненных PDF
├── index.js                     # Основной файл сервера Express
├── pdf-generator.js             # Модуль для генерации PDF документов
├── package.json                 # Зависимости проекта
└── .env                         # Файл с переменными окружения
```

## Назначение файлов в папке `public`

### Файлы для стандартной формы

1. **index.html** - Основная HTML-страница стандартной формы заявки.
   - Содержит форму для ввода личных данных, загрузки фотографии и подписи.
   - Интегрируется с Telegram Web App JS для работы внутри Telegram.

2. **app.js** - JavaScript-код для стандартной формы.
   - Обрабатывает ввод пользователя и валидацию формы.
   - Выполняет отправку данных на сервер.
   - Содержит функции для работы с canvas (подпись) и загрузки фотографий.
   - Управляет интерфейсом и взаимодействием с Telegram Web App.

3. **styles.css** - Стили для стандартной формы.
   - Отвечает за визуальное оформление элементов формы.
   - Содержит адаптивные стили для корректного отображения на устройствах разных размеров.

### Файлы для формы доверенности BIG

4. **vollmacht.html** - HTML-страница для формы доверенности BIG.
   - Представляет специализированную форму для создания доверенности BIG.
   - Включает поля для ввода личных данных застрахованного лица.
   - Содержит раздел для подписи и согласия.

5. **vollmacht.js** - JavaScript-код для формы доверенности BIG.
   - Обрабатывает ввод пользователя и валидацию формы доверенности.
   - Содержит функции для работы с canvas (подпись).
   - Отправляет данные на сервер и интегрируется с Telegram.
   - Выполняет проверку корректности ввода данных (латинские символы, корректный email и т.д.).

6. **vollmacht-styles.css** - Стили для формы доверенности.
   - Отвечает за визуальное оформление специализированной формы доверенности.
   - Содержит стили для отображения логотипа, заголовков и разделов формы.

## Основные модули сервера

1. **index.js** - Основной файл сервера Express.
   - Обрабатывает HTTP-запросы.
   - Интегрируется с Telegram Bot API для отправки сообщений.
   - Управляет сохранением файлов и данных.

2. **pdf-generator.js** - Модуль для создания PDF-документов.
   - Содержит функциональность для генерации PDF на основе данных пользователя.
   - Реализует различные форматы документов с использованием библиотеки jsPDF.
   - Выполняет размещение и форматирование текста, изображений и подписей.

## Техническая реализация

- **Frontend**: HTML, CSS, JavaScript, Telegram Web App API
- **Backend**: Node.js, Express
- **PDF Генерация**: jsPDF, jspdf-autotable
- **Мессенджер**: Telegram API (для отправки сообщений и документов)

## Инструкция по установке и запуску

1. Установите зависимости:
   ```
   npm install
   ```

2. Создайте файл `.env` с необходимыми переменными окружения:
   ```
   BOT_TOKEN=ваш_токен_телеграм_бота
   ADMIN_CHAT_ID=id_чата_администратора
   WEBAPP_URL=url_вашего_приложения
   ```

3. Запустите сервер:
   ```
   npm start
   ```

4. Приложение будет доступно через вашего Telegram бота.

## Переменные окружения

- `BOT_TOKEN` - Токен Telegram бота
- `ADMIN_CHAT_ID` - ID чата администратора для получения заполненных форм
- `WEBAPP_URL` - URL веб-приложения
- `PORT` - Порт для запуска сервера (по умолчанию 3000) 