# Versisch Bot - Telegram бот для заполнения форм

Versisch Bot - это Telegram бот, который позволяет пользователям заполнять различные формы и генерировать PDF-документы на основе введенных данных. Бот интегрируется с веб-приложением, которое предоставляет удобный интерфейс для заполнения форм.

## Функциональность

- Заполнение стандартной формы с личными данными
- Заполнение формы доверенности BIG
- Создание PDF-документов на основе введенных данных
- Отправка заполненных форм администратору и пользователю
- Поддержка загрузки фотографий и создания подписи

## Структура проекта

```
project-folder/
├── index.js                  # Основной файл приложения
├── pdf-generator.js          # Модуль для генерации PDF (устаревший)
├── utils/
│   └── pdfGenerator.js       # Новый модуль для генерации PDF
├── public/                   # Файлы клиентской части
│   ├── index.html            # Основная HTML-страница
│   ├── styles.css            # Стили для основной страницы
│   ├── app.js                # JavaScript для основной страницы
│   ├── vollmacht.html        # HTML-страница для формы доверенности
│   ├── vollmacht-styles.css  # Стили для формы доверенности
│   └── vollmacht.js          # JavaScript для формы доверенности
├── docs/                     # Документация
│   └── public-files-description.md  # Описание файлов в папке public
├── uploads/                  # Папка для загруженных файлов
└── filled_forms/             # Папка для заполненных PDF-форм
```

## Технологии

- **Node.js** - серверная платформа
- **Express** - веб-фреймворк для Node.js
- **Telegraf** - библиотека для создания Telegram ботов
- **jsPDF** - библиотека для создания PDF-документов
- **Multer** - middleware для обработки multipart/form-data

## Установка и запуск

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/yourusername/versisch-bot.git
   cd versisch-bot
   ```

2. Установите зависимости:
   ```
   npm install
   ```

3. Создайте файл `.env` с переменными окружения:
   ```
   BOT_TOKEN=your_telegram_bot_token
   ADMIN_CHAT_ID=your_admin_chat_id
   WEBAPP_URL=your_webapp_url
   ```

4. Запустите приложение:
   ```
   npm start
   ```

## Модули проекта

### Серверная часть

- **index.js** - основной файл приложения, который настраивает Express-сервер, инициализирует Telegram бота и обрабатывает API-запросы.
- **utils/pdfGenerator.js** - модуль для генерации PDF-документов на основе данных пользователя с использованием библиотеки jsPDF.

### Клиентская часть

Клиентская часть приложения находится в папке `public` и состоит из HTML, CSS и JavaScript файлов для двух форм:
1. Стандартная форма (index.html, styles.css, app.js)
2. Форма доверенности BIG (vollmacht.html, vollmacht-styles.css, vollmacht.js)

Подробное описание файлов клиентской части можно найти в [документации](docs/public-files-description.md).

## Процесс работы

1. Пользователь открывает бота в Telegram и выбирает тип формы для заполнения.
2. Бот открывает веб-приложение с соответствующей формой.
3. Пользователь заполняет форму, добавляет подпись и отправляет данные.
4. Сервер генерирует PDF-документ на основе полученных данных.
5. Заполненный документ отправляется администратору и пользователю через Telegram.

## Разработка

### Добавление новых типов форм

Для добавления нового типа формы необходимо:

1. Создать HTML, CSS и JavaScript файлы для новой формы в папке `public`.
2. Добавить новую кнопку в обработчик команды `/start` в файле `index.js`.
3. Создать обработчик API-запросов для новой формы в файле `index.js`.
4. Добавить функцию для генерации PDF для новой формы в модуль `utils/pdfGenerator.js`.

### Модификация существующих форм

Для изменения существующих форм следуйте рекомендациям в [документации](docs/public-files-description.md).

## Лицензия

MIT 